<!DOCTYPE html>

<html>
<head>
	<title>Warhammer 40k</title>

	<style>
		table {
			table-layout: fixed;
			width: 72%;
			text-align: center;
		}

	</style>

	<script>
		var modelList = {}

		function updateTroopTable() {
			var request = new XMLHttpRequest()
			request.onreadystatechange = function() {
				if (this.readyState == 4 && this.status == 200) {
					var response = JSON.parse(request.responseText)
					console.log(typeof response.value)
					document.getElementById("troops").innerHTML = response.value
				}
			}
			request.open("POST", "resources/models.json", true)
			request.send()
		}

		function getModelList() {
			var request = new XMLHttpRequest()
			request.onreadystatechange = function() {
				if (this.readyState == 4 && this.status == 200) {
					console.log("Get Model List request received")
					modelList = JSON.parse(request.responseText)
					for (model in modelList) {
						var option = document.createElement("option")
						option.innerHTML = model
						document.getElementById("model-selector").add(option)
					}
					document.getElementById("unit-builder").style.visibility = "visible"
				}
			}
			request.open("POST", "/getModelList")
			request.send()
		}
	</script>
</head>

<body>
	<header>
		<h1>Warhammer 40k Army Builder</h1>
		<nav>
			<button onclick="updateTroopTable()">Update Troop Table</button>
			<button onclick="myTroops()">My Troops</button>
			<button onclick="getModelList()">Model List</button>
		</nav>
	</header>
	  
	  <main>
		<section id="troops">
		</section>
		<section>
			<form id="unit-builder" hidden>
				<select id="model-selector">
				</select>
			</form>
		</section>
	  </main>
</body>

</html>
